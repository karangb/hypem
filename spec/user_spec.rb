require 'spec_helper'

describe Hypem::User do
  let(:user) { Hypem::User.new('jackca') }
  subject { user }

  its(:name) { should_not be_nil }

  it "throws an error with an invalid username argument" do
    expect { Hypem::User.new(:not_a_string) }.to raise_error(ArgumentError)
  end

  describe "#loved_playlist" do
    specify do
      Hypem::Playlist.should_receive(:loved).with(subject.name,anything)
      subject.loved_playlist
    end
  end

  describe "#obsessed_playlist" do
    specify do
      Hypem::Playlist.should_receive(:obsessed).with(subject.name,anything)
      subject.obsessed_playlist
    end
  end

  describe "#feed_playlist" do
    specify do
      Hypem::Playlist.should_receive(:feed).with(subject.name,anything)
      subject.feed_playlist
    end
  end

  describe "#friends_favorites_playlist" do
    specify do
      Hypem::Playlist.should_receive(:friends_favorites).with(subject.name,anything)
      subject.friends_favorites_playlist
    end
  end

  describe "#friends_history_playlist" do
    specify do
      Hypem::Playlist.should_receive(:friends_history).with(subject.name,anything)
      subject.friends_history_playlist
    end
  end

  describe "#get_profile" do
    let(:user_with_profile) do
      VCR.use_cassette('user_profile') {user.get_profile}
    end

    subject {user_with_profile}

    its(:full_name) {should == "Jack Anderson"}
    its(:joined_at) {should be_a DateTime}
    its(:location) {should == 'San Francisco, CA, US'}
    its(:twitter_username) {should == 'janderson'}
    its(:image_url) {should == 'http://faces-s3.hypem.com/123376863051420_75.png'}
    its(:followed_users_count) {should be_an Integer}
    its(:followed_items_count) {should be_an Integer}
    its(:followed_sites_count) {should be_an Integer}
    its(:followed_queries_count) {should be_an Integer}
  end

  describe "#friends" do
    let(:user_with_friends) do
      VCR.use_cassette('user_friends') {user.friends}
    end

    subject {user_with_friends}

    it {should be_an Array}

    it "be an array of users" do
      subject.first.should be_a Hypem::User
    end
  end

  describe "toJson" do
    it "should be able to convert profile to json" do
      VCR.use_cassette('user_profile') {
        user.get_profile.to_json.should == "{\"@name\":\"jackca\",\"@username\":\"JackCA\",\"@profile_url\":\"http://hypem.com/JackCA\",\"@full_name\":\"Jack Anderson\",\"@twitter_username\":\"janderson\",\"@image_url\":\"http://faces-s3.hypem.com/123376863051420_75.png\",\"@joined_at\":\"2009-03-30T01:06:55+01:00\",\"@location\":\"San Francisco, CA, US\",\"@followed_users_count\":6,\"@followed_items_count\":511,\"@followed_sites_count\":39,\"@followed_queries_count\":17,\"@followed_followerss_count\":2}"  
      }      
    end
    it "should be able to convert profile with obsessed_playlist to json" do
      VCR.use_cassette('user_profile_with_obsessed_playlist') {
        user.get_profile
        user.obsessed_playlist.get
        user.get_profile.to_json.should == "{\"@name\":\"jackca\",\"@o_p\":{\"@type\":\"obsessed\",\"@arg\":\"jackca\",\"@page\":1,\"@path\":\"/playlist/obsessed/jackca\",\"@tracks\":[{\"@media_id\":\"1yr1j\",\"@artist\":\"Holy Ghost\",\"@title\":\"Okay\",\"@date_posted\":\"2013-10-27T22:21:15+00:00\",\"@site_id\":17477,\"@site_name\":\"The Ripe\",\"@post_url\":\"http://www.theripe.tv/holy-ghost-hold-on-were-going-home-drake-cover/\",\"@post_id\":2345843,\"@loved_count\":4761,\"@posted_count\":41,\"@thumb_url\":\"http://static-ak.hypem.net/thumbs_new/9a/2308506.jpg\",\"@thumb_url_large\":\"http://static-ak.hypem.net/thumbs_new/a1/2299553_320.jpg\",\"@time\":274,\"@description\":\"New York synthpop duo Holy Ghost! debuted their glitzy new cover of Drake’s single ‘Hold On, We’re Coming Home‘ over the airwaves of a Seattle radio station last week. While the original track is a smoother, silkier sound for Drake, Holy Ghost have captur\",\"@itunes_link\":\"http://hypem.com/go/itunes_search/Holy%20Ghost\",\"@thumb_url_medium\":\"http://static-ak.hypem.net/thumbs_new/9a/2308506_120.jpg\",\"@thumb_url_artist\":null,\"@dateloved\":1383275531,\"@plays\":29},{\"@media_id\":\"1ysx8\",\"@artist\":\"Yuna\",\"@title\":\"Falling (produced by Robin Hannibal)\",\"@date_posted\":\"2013-10-25T06:14:28+01:00\",\"@site_id\":13464,\"@site_name\":\"Seattle in High Def\",\"@post_url\":\"http://seainhd.com/2013/10/bangerang-cuz-youre-a-good-girl-and-you-know-it.html\",\"@post_id\":2344060,\"@loved_count\":7973,\"@posted_count\":16,\"@thumb_url\":\"http://static-ak.hypem.net/thumbs_new/a1/2291361.jpg\",\"@thumb_url_large\":\"http://static-ak.hypem.net/thumbs_new/a1/2291361_320.jpg\",\"@time\":247,\"@description\":\"This Cover is so Dope! well kinda, its mostly fun to hear hiphop rap covered by dinky electro pop. Adventure Ccclub is seriously killing it with these traks. This first one is called GOLD, it features YUNA, who has a hot track with theophilus london. I co\",\"@itunes_link\":\"http://hypem.com/go/itunes_search/Yuna\",\"@thumb_url_medium\":\"http://static-ak.hypem.net/thumbs_new/a1/2291361_120.jpg\",\"@thumb_url_artist\":null,\"@dateloved\":1383424196,\"@plays\":22},{\"@media_id\":\"1v9m0\",\"@artist\":\"Naughty Boy\",\"@title\":\"La La La (feat. Sam Smith)\",\"@date_posted\":\"2013-10-23T22:00:46+01:00\",\"@site_id\":10819,\"@site_name\":\"the burning ear\",\"@post_url\":\"http://www.theburningear.com/2013/10/naughty-boy-la-la-la-feat-sam-smith/\",\"@post_id\":2342488,\"@loved_count\":12363,\"@posted_count\":13,\"@thumb_url\":\"http://static-ak.hypem.net/thumbs_new/58/2342488.jpg\",\"@thumb_url_large\":\"http://static-ak.hypem.net/thumbs_new/85/2286725_320.jpg\",\"@time\":222,\"@description\":\"I know I’m 6 months (and 155 million views!) late but just in case you missed this jam like I did, here it is. Catch up! Now time to dove into the whole Naughty Boy album…\",\"@itunes_link\":\"http://hypem.com/go/itunes_search/Naughty%20Boy\",\"@thumb_url_medium\":\"http://static-ak.hypem.net/thumbs_new/58/2342488_120.jpg\",\"@thumb_url_artist\":null,\"@dateloved\":1383424700,\"@plays\":20},{\"@media_id\":\"1r0qr\",\"@artist\":\"Flight Facilities\",\"@title\":\"Clair De Lune (feat. Christine Hoberg)\",\"@date_posted\":\"2013-10-27T18:21:08+00:00\",\"@site_id\":18197,\"@site_name\":\"Y Este Finde Que\",\"@post_url\":\"http://www.yestefindeque.com/2013/10/flight-facilities-feat-christine-hoberg_27.html\",\"@post_id\":2345729,\"@loved_count\":17425,\"@posted_count\":67,\"@thumb_url\":\"http://static-ak.hypem.net/thumbs_new/7a/2338426.jpg\",\"@thumb_url_large\":\"http://static-ak.hypem.net/thumbs_new/7a/2338426_320.jpg\",\"@time\":462,\"@description\":\"Continuando con las producciones ideales para una tarde de Domingo os traemos ahora al gran dúo australiano Flight Facilities con el lanzamiento de su single \\\"Clair De Lune\\\" en su versión Remixes EP. Tras el adelanto en forma de Edit free download protago\",\"@itunes_link\":\"http://hypem.com/go/itunes_search/Flight%20Facilities\",\"@thumb_url_medium\":\"http://static-ak.hypem.net/thumbs_new/7a/2338426_120.jpg\",\"@thumb_url_artist\":null,\"@dateloved\":1379736700,\"@plays\":19},{\"@media_id\":\"1yrs9\",\"@artist\":\"Zero 7\",\"@title\":\"On My Own (12\\\" Version)\",\"@date_posted\":\"2013-09-19T18:21:20+01:00\",\"@site_id\":16816,\"@site_name\":\"Delicieuse Musique\",\"@post_url\":\"http://www.delicieuse-musique.com/post/61574663064/concours-de-circonstances-aujourdhui-tous-deux\",\"@post_id\":2307228,\"@loved_count\":3408,\"@posted_count\":22,\"@thumb_url\":\"http://static-ak.hypem.net/thumbs_new/9c/2307228.jpg\",\"@thumb_url_large\":\"http://static-ak.hypem.net/thumbs_new/f9/2297849_320.jpg\",\"@time\":551,\"@description\":\"Concours de circonstances aujourd’hui : tous deux sont britanniques, furent les valeurs sûres du Downtempo du début des années 2000, et sont restés dans le silence pendant plus de 4 ans. Vous l’aurez compris, Nightmares on Wax et Zero 7 sont de retour ! C\",\"@itunes_link\":\"http://hypem.com/go/itunes_search/Zero%207\",\"@thumb_url_medium\":\"http://static-ak.hypem.net/thumbs_new/9c/2307228_120.jpg\",\"@thumb_url_artist\":null,\"@dateloved\":1382505949,\"@plays\":18},{\"@media_id\":\"1xmjy\",\"@artist\":\"Bondax\",\"@title\":\"Giving It All (Radio Edit)\",\"@date_posted\":\"2013-10-08T12:17:15+01:00\",\"@site_id\":13119,\"@site_name\":\"Neu\",\"@post_url\":\"http://www.thisisfakediy.co.uk/articles/neu/the-neu-bulletin-8th-october-2013/\",\"@post_id\":2325980,\"@loved_count\":4073,\"@posted_count\":42,\"@thumb_url\":\"http://static-ak.hypem.net/thumbs_new/dc/2325980.jpg\",\"@thumb_url_large\":\"http://static-ak.hypem.net/thumbs_new/ef/2311919_320.jpg\",\"@time\":190,\"@description\":\"The Neu Bulletin provides a daily dose of new music tips, all in the name of exposing you to something fresh and exciting. Every day we offer up a choice show, a song of the day and a little something extra that's caught our attention. Check back here eve\",\"@itunes_link\":\"http://hypem.com/go/itunes_search/Bondax\",\"@thumb_url_medium\":\"http://static-ak.hypem.net/thumbs_new/dc/2325980_120.jpg\",\"@thumb_url_artist\":null,\"@dateloved\":1383425427,\"@plays\":17},{\"@media_id\":\"1yrz7\",\"@artist\":\"Roosevelt\",\"@title\":\"Elliot\",\"@date_posted\":\"2013-11-05T10:49:30+00:00\",\"@site_id\":17180,\"@site_name\":\"Frenchy Symphony\",\"@post_url\":\"http://www.frenchysymphony.com/post/66080922246/jeu-concours-discovery-nuba-roosevelt\",\"@post_id\":2354433,\"@loved_count\":3112,\"@posted_count\":40,\"@thumb_url\":\"http://static-ak.hypem.net/thumbs_new/1/2354433.jpg\",\"@thumb_url_large\":\"http://static-ak.hypem.net/thumbs_new/64/2339940_320.jpg\",\"@time\":261,\"@description\":\"On ne présente plus ZAPPRUDER Records, label Franco-New Yorkais tout juste installé à Paris, qui à...\",\"@itunes_link\":\"http://hypem.com/go/itunes_search/Roosevelt\",\"@thumb_url_medium\":\"http://static-ak.hypem.net/thumbs_new/1/2354433_120.jpg\",\"@thumb_url_artist\":null,\"@dateloved\":1383425163,\"@plays\":17},{\"@media_id\":\"1ypv8\",\"@artist\":\"Wiz Khalifa\",\"@title\":\"Look Into My Eyes\",\"@date_posted\":\"2013-08-24T22:42:18+01:00\",\"@site_id\":5728,\"@site_name\":\"Welikeit.indie\",\"@post_url\":\"http://diary.welikeitindie.com/post/59226468228\",\"@post_id\":2281521,\"@loved_count\":2615,\"@posted_count\":5,\"@thumb_url\":\"http://static-ak.hypem.net/thumbs_new/31/2281521.jpg\",\"@thumb_url_large\":\"http://static-ak.hypem.net/thumbs_new/31/2281521_320.jpg\",\"@time\":216,\"@description\":\"Wiz Khalifa is giving away a brand new song titled “Look Into My Eyes”. The track belongs to his upcoming 5th studio album, Blacc Hollywood, due out later this year. Look Into My Eyes // download\",\"@itunes_link\":\"http://hypem.com/go/itunes_search/Wiz%20Khalifa\",\"@thumb_url_medium\":\"http://static-ak.hypem.net/thumbs_new/31/2281521_120.jpg\",\"@thumb_url_artist\":null,\"@dateloved\":1383424929,\"@plays\":16},{\"@media_id\":\"1tcej\",\"@artist\":\"2 Chainz\",\"@title\":\"I'm Different\",\"@date_posted\":\"2013-07-29T19:57:46+01:00\",\"@site_id\":11067,\"@site_name\":\"EARMILK\",\"@post_url\":\"http://www.earmilk.com/2013/07/29/lollapalooza-2013-earmilk-playlist/\",\"@post_id\":2255217,\"@loved_count\":671,\"@posted_count\":3,\"@thumb_url\":\"http://static-ak.hypem.net/thumbs_new/83/2129283.jpg\",\"@thumb_url_large\":\"http://static-ak.hypem.net/thumbs_new/83/2129283_320.jpg\",\"@time\":207,\"@description\":\"Every year, the beautiful greenspaces of Grant Park is used to host an enormous music festival called Lollapalooza. This is one of the main summer attractions that Chicago is known for and as its twenty-third edition approaches, let's mentally prepare our\",\"@itunes_link\":\"http://hypem.com/go/itunes_search/2%20Chainz\",\"@thumb_url_medium\":\"http://static-ak.hypem.net/thumbs_new/83/2129283_120.jpg\",\"@thumb_url_artist\":null,\"@dateloved\":1379736470,\"@plays\":15},{\"@media_id\":\"1ypng\",\"@artist\":\"Ella Fitzgerald\",\"@title\":\"Blue Skies (Maya Jane Coles Remix)\",\"@date_posted\":\"2013-08-29T15:14:17+01:00\",\"@site_id\":11631,\"@site_name\":\"deepbeep\",\"@post_url\":\"http://www.deepbeep.com.br/blog/maya-jane-coles-no-auge/\",\"@post_id\":2285983,\"@loved_count\":2232,\"@posted_count\":11,\"@thumb_url\":\"http://static-ak.hypem.net/thumbs_new/9f/2285983.jpg\",\"@thumb_url_large\":\"http://static-ak.hypem.net/thumbs_new/9f/2285983_320.jpg\",\"@time\":337,\"@description\":\"A japinha inglesa Maya Jane Coles lançou seu primeiro álbum autoral em julho (“Comfort”, via seu selo I/AM/ME), momento decisivo de todo artista revelação que chegou a um auge exitoso como é o de Maya: boa DJ de vários ritmos, produtora de sucesso, foda n\",\"@itunes_link\":\"http://hypem.com/go/itunes_search/Ella%20Fitzgerald\",\"@thumb_url_medium\":\"http://static-ak.hypem.net/thumbs_new/9f/2285983_120.jpg\",\"@thumb_url_artist\":null,\"@dateloved\":1383425620,\"@plays\":14},{\"@media_id\":\"1y16x\",\"@artist\":\"Eli & Fur\",\"@title\":\"You're So High\",\"@date_posted\":\"2013-08-28T05:07:38+01:00\",\"@site_id\":17373,\"@site_name\":\"GIVAFIZZ\",\"@post_url\":\"http://givafizz.com/eli-fur-youre-so-high-ejeca-remix/\",\"@post_id\":2284381,\"@loved_count\":2630,\"@posted_count\":6,\"@thumb_url\":\"http://static-ak.hypem.net/thumbs_new/5d/2284381.jpg\",\"@thumb_url_large\":\"http://static-ak.hypem.net/thumbs_new/5d/2284381_320.jpg\",\"@time\":326,\"@description\":\"London’s freshest sounding producer duo Eli & Fur have released their mesmerising new Illusions EP, which came out last month on NYX Records. Since bursting onto the scene in 2012, Eli & Fur have been perfecting a sound built around infectious, electronic\",\"@itunes_link\":\"http://hypem.com/go/itunes_search/Eli%20&%20Fur\",\"@thumb_url_medium\":\"http://static-ak.hypem.net/thumbs_new/5d/2284381_120.jpg\",\"@thumb_url_artist\":null,\"@dateloved\":1379559586,\"@plays\":14},{\"@media_id\":\"1yg3f\",\"@artist\":\"Bee Gees\",\"@title\":\"Tragedy (Forever Kid Remix)\",\"@date_posted\":\"2013-08-27T20:24:42+01:00\",\"@site_id\":17165,\"@site_name\":\"Caveman Sound\",\"@post_url\":\"http://cavemansound.com/2013/08/27/kylie-minogue-cant-get-you-out-of-my-head-forever-kid-remix/\",\"@post_id\":2283959,\"@loved_count\":5934,\"@posted_count\":6,\"@thumb_url\":\"http://static-ak.hypem.net/thumbs_new/b7/2283959.jpg\",\"@thumb_url_large\":\"http://static-ak.hypem.net/thumbs_new/b7/2283959_320.jpg\",\"@time\":222,\"@description\":\"Swedish born, LA based Forever Kid may be a new name on the streets but they are quickly making their mark with a run of killer remixes. The up-and-coming duo recently started a series called ‘Forever Kid Fridays’ which we’ll see a new remix or original f\",\"@itunes_link\":\"http://hypem.com/go/itunes_search/Bee%20Gees\",\"@thumb_url_medium\":\"http://static-ak.hypem.net/thumbs_new/b7/2283959_120.jpg\",\"@thumb_url_artist\":null,\"@dateloved\":1378602264,\"@plays\":14},{\"@media_id\":\"1yacj\",\"@artist\":\"Cut Copy\",\"@title\":\"Let Me Show You\",\"@date_posted\":\"2013-11-04T23:43:13+00:00\",\"@site_id\":13346,\"@site_name\":\"buffaBLOG\",\"@post_url\":\"http://www.buffablog.com/2013/11/listeners-digest-presents-upcoming.html\",\"@post_id\":2354099,\"@loved_count\":2094,\"@posted_count\":46,\"@thumb_url\":\"http://static-ak.hypem.net/thumbs_new/b3/2354099.jpg\",\"@thumb_url_large\":\"http://static-ak.hypem.net/thumbs_new/b3/2354099_320.jpg\",\"@time\":365,\"@description\":\"Is the year slowing down? When I looked at what was coming out this month, I started to realize that the new release stream is lightening as the year winds to a close. Soon, we will be reading a seemingly endless string of year end reviews (none of which \",\"@itunes_link\":\"http://hypem.com/go/itunes_search/Cut%20Copy\",\"@thumb_url_medium\":\"http://static-ak.hypem.net/thumbs_new/b3/2354099_120.jpg\",\"@thumb_url_artist\":null,\"@dateloved\":1382749287,\"@plays\":13},{\"@media_id\":\"1yz9f\",\"@artist\":\"Yumi And The Weather\",\"@title\":\"All We Can\",\"@date_posted\":\"2013-10-21T15:50:05+01:00\",\"@site_id\":17650,\"@site_name\":\"Stamp The Wax\",\"@post_url\":\"http://www.stampthewax.com/2013/10/21/monday-morning-mixtape-009/\",\"@post_id\":2339226,\"@loved_count\":1503,\"@posted_count\":21,\"@thumb_url\":\"http://static-ak.hypem.net/thumbs_new/9a/2339226.jpg\",\"@thumb_url_large\":\"http://static-ak.hypem.net/thumbs_new/83/2337155_320.jpg\",\"@time\":263,\"@description\":\"We start with a heart-stopping track from Yann Tiersen, which you may recognise from the Amélie soundtrack. Also included is a brilliant collaboration between Steve Spacek and Gifted & Blessed, whose new album Within These Machines is out now. Look out fo\",\"@itunes_link\":\"http://hypem.com/go/itunes_search/Yumi%20And%20The%20Weather\",\"@thumb_url_medium\":\"http://static-ak.hypem.net/thumbs_new/9a/2339226_120.jpg\",\"@thumb_url_artist\":null,\"@dateloved\":1382505151,\"@plays\":13},{\"@media_id\":\"1ydj5\",\"@artist\":\"Drake\",\"@title\":\"Hold On We're Going Home feat. Majid Jordan (100 BPM)\",\"@date_posted\":\"2013-08-06T18:32:54+01:00\",\"@site_id\":10070,\"@site_name\":\"Hilly Dilly\",\"@post_url\":\"http://www.hillydilly.com/2013/08/drake-hold-on-were-going-home-ft-majid-jordan/\",\"@post_id\":2263347,\"@loved_count\":1511,\"@posted_count\":1,\"@thumb_url\":\"http://static-ak.hypem.net/images/albumart/50/3.png\",\"@thumb_url_large\":\"http://static-ak.hypem.net/rev_1379367102/images/blog_images/10070.jpg\",\"@time\":210,\"@description\":\"Fresh off his OVO Fest in Toronto last night, Drake has released his newest track, ”Hold On We’re Going Home” that features r&b newcomer Majid Jordan. Truth be told, out of all the Drake songs that have been released leading up to his new album, this r&b-\",\"@itunes_link\":\"http://hypem.com/go/itunes_search/Drake\",\"@thumb_url_artist\":null,\"@dateloved\":1378485295,\"@plays\":13},{\"@media_id\":\"1ybze\",\"@artist\":\"Felix Cartal\",\"@title\":\"New Scene (feat. Ofelia)\",\"@date_posted\":\"2013-08-14T22:14:57+01:00\",\"@site_id\":6988,\"@site_name\":\"Salacious Sound\",\"@post_url\":\"http://salacioussound.com/2013/08/felix-cartal-new-scene-feat-ofelia/\",\"@post_id\":2272029,\"@loved_count\":6668,\"@posted_count\":7,\"@thumb_url\":\"http://static-ak.hypem.net/thumbs_new/1d/2272029.jpg\",\"@thumb_url_large\":\"http://static-ak.hypem.net/thumbs_new/1d/2272029_320.jpg\",\"@time\":240,\"@description\":\"The Vancouver native Felix Cartal delivers. New Scene is nothing short of beautiful, and to boot it’s one of the favorite tracks he’s ever written! Felix Cartal On: Facebook | Soundcloud | Twitter ^Xaos Related posts: Felix Cartal – Young Love ft. Koko La\",\"@itunes_link\":\"http://hypem.com/go/itunes_search/Felix%20Cartal\",\"@thumb_url_medium\":\"http://static-ak.hypem.net/thumbs_new/1d/2272029_120.jpg\",\"@thumb_url_artist\":null,\"@dateloved\":1378587999,\"@plays\":12},{\"@media_id\":\"1c1vf\",\"@artist\":\"Atlas Genius\",\"@title\":\"Trojans\",\"@date_posted\":\"2013-10-07T15:59:55+01:00\",\"@site_id\":10481,\"@site_name\":\"Windy City Rock\",\"@post_url\":\"http://www.windycityrock.net/2013/10/atlas-genius-at-house-of-blues-10113.html\",\"@post_id\":2324787,\"@loved_count\":9726,\"@posted_count\":53,\"@thumb_url\":\"http://static-ak.hypem.net/thumbs_new/33/2324787.jpg\",\"@thumb_url_large\":\"http://static-ak.hypem.net/thumbs_new/9d/2261917_320.jpg\",\"@time\":216,\"@description\":\"By Melissa Bordeau Once Atlas Genius opened up their 45-minute set at House of Blues last Tuesday with \\\"If So,\\\" just about everyone in the crowd was clapping along. The Australian group played together beautifully, as if they had been playing together for\",\"@itunes_link\":\"http://hypem.com/go/itunes_search/Atlas%20Genius\",\"@thumb_url_medium\":\"http://static-ak.hypem.net/thumbs_new/9d/2261917_120.jpg\",\"@thumb_url_artist\":null,\"@dateloved\":1378485708,\"@plays\":11},{\"@media_id\":\"1yzqy\",\"@artist\":\"f y f e\",\"@title\":\"Solace (Jeremy Summer Camp Remix)\",\"@date_posted\":\"2013-09-09T02:28:22+01:00\",\"@site_id\":6736,\"@site_name\":\"Pigeons and Planes\",\"@post_url\":\"http://pigeonsandplanes.com/2013/09/fyfe-solace-jeremy-summer-camp-remix/\",\"@post_id\":2295102,\"@loved_count\":961,\"@posted_count\":7,\"@thumb_url\":\"http://static-ak.hypem.net/thumbs_new/3e/2295102.jpg\",\"@thumb_url_large\":\"http://static-ak.hypem.net/thumbs_new/e/2262542_320.jpg\",\"@time\":225,\"@description\":\"A few weeks ago, f y f e churned out a lovely remix of Summer Camp’s “Fresh.” Now, we have a response remix as Jeremy from Summer Camp returns the favor, flipping Fyfe’s “Solace.” Jeremy’s version is a fast-paced, upbeat affair that’ll lift your spirits, \",\"@itunes_link\":\"http://hypem.com/go/itunes_search/f%20y%20f%20e\",\"@thumb_url_medium\":\"http://static-ak.hypem.net/thumbs_new/3e/2295102_120.jpg\",\"@thumb_url_artist\":null,\"@dateloved\":1380766715,\"@plays\":10},{\"@media_id\":\"1k7vm\",\"@artist\":\"Eric Clapton\",\"@title\":\"Cocaine (No Big Deal Remix)\",\"@date_posted\":\"2013-08-16T17:50:11+01:00\",\"@site_id\":19297,\"@site_name\":\"Lautstark\",\"@post_url\":\"http://www.lautstark.me/?p=1458\",\"@post_id\":2273955,\"@loved_count\":7089,\"@posted_count\":9,\"@thumb_url\":\"http://static-ak.hypem.net/thumbs_new/5a/2270298.jpg\",\"@thumb_url_large\":\"http://static-ak.hypem.net/thumbs_new/c4/1779652_320.jpg\",\"@time\":325,\"@description\":\"ERIIIIIIIIIIIC CLAPTON IN YOU FACE!! Nur damit wir uns nicht falsch verstehen, das hier ist das Original!\",\"@itunes_link\":\"http://hypem.com/go/itunes_search/Eric%20Clapton\",\"@thumb_url_medium\":\"http://static-ak.hypem.net/thumbs_new/5a/2270298_120.jpg\",\"@thumb_url_artist\":null,\"@dateloved\":1378483845,\"@plays\":10},{\"@media_id\":\"1z8ad\",\"@artist\":\"Chromeo\",\"@title\":\"Over Your Shoulder\",\"@date_posted\":\"2013-11-01T04:14:15+00:00\",\"@site_id\":14883,\"@site_name\":\"Electro Italia\",\"@post_url\":\"http://www.electroitalia.it/chromeo-over-your-shoulder-sex-socialite/\",\"@post_id\":2351135,\"@loved_count\":9354,\"@posted_count\":63,\"@thumb_url\":\"http://static-ak.hypem.net/thumbs_new/1f/2351135.jpg\",\"@thumb_url_large\":\"http://static-ak.hypem.net/thumbs_new/1f/2351135_320.jpg\",\"@time\":276,\"@description\":\"In attesa del nuovo album “White Women” (in featuring con Ezra Koenig dei Vampire Weekend, Toro Y Moi, Solange, Pat Mahoney degli LCD Soundsystem e dal duo della Fools Gold Records “Oliver”) ecco il nuovo Ep dei Chromeo, contenente “Over Your Shoulder” e \",\"@itunes_link\":\"http://hypem.com/go/itunes_search/Chromeo\",\"@thumb_url_medium\":\"http://static-ak.hypem.net/thumbs_new/1f/2351135_120.jpg\",\"@thumb_url_artist\":null,\"@dateloved\":1382504887,\"@plays\":9}]},\"@username\":\"JackCA\",\"@profile_url\":\"http://hypem.com/JackCA\",\"@full_name\":\"Jack Anderson\",\"@twitter_username\":\"janderson\",\"@image_url\":\"http://s3.amazonaws.com/faces-s3.hypem.com/123376770654842_75.png\",\"@joined_at\":\"2009-03-30T01:06:55+01:00\",\"@location\":\"San Francisco, CA, US\",\"@followed_users_count\":9,\"@followed_items_count\":702,\"@followed_sites_count\":46,\"@followed_queries_count\":21,\"@followed_followerss_count\":5}"
    }      
    end
  end

  describe "#favorite_blogs" do
    let(:user_with_favorite_blogs) do
      VCR.use_cassette('user_favorite_blogs') {user.favorite_blogs}
    end

    subject {user_with_favorite_blogs}

    it {should be_an Array}

    it "should be an array of Blogs" do
      subject.first.should be_a Hypem::Blog
    end
  end

end
